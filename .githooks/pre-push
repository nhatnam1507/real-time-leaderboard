#!/bin/bash

# Git pre-push hook
# Runs `make check` before allowing push to remote repository
# Prevents push if checks fail

echo "Running pre-push checks..."
echo "================================"

# Run make check
if ! make check; then
    echo ""
    echo "❌ Pre-push checks failed!"
    echo "Please fix the issues above before pushing."
    echo ""
    echo "To bypass the hook (not recommended), use: git push --no-verify"
    echo ""
    exit 1
fi

echo ""
echo "✅ All pre-push checks passed!"
echo "================================"
exit 0
